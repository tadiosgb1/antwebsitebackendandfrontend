import M from"./AddNews-5a53d8b4.js";import I from"./EditNews-092e5055.js";import{L as N}from"./Loading-ba997810.js";import{D as P}from"./DeleteConfirmModal-b44bd4e2.js";import{_ as S,r as u,o as r,c as d,a as h,b as t,w as f,v as z,d as V,F as x,e as p,f as c,t as i,g as b,h as v}from"./index-4d9ae2c6.js";const D={components:{AddNews:M,EditNews:I,Loading:N,DeleteConfirmModal:P},data(){return{items:[],count:0,nextPage:null,previousPage:null,currentPage:1,pageSize:3,searchQuery:"",showModal:!1,editMode:!1,selectedItem:null,loading:!1,deleteModalVisible:!1,deleteId:null,expandedContents:{},zoomImage:null}},methods:{async fetchItems(n=1){this.loading=!0,this.currentPage=n;const e={page:this.currentPage,page_size:this.pageSize,search:this.searchQuery};try{const a=await this.$apiGet("/news",e);this.items=a.data||[],this.count=a.count||0,this.nextPage=a.next||null,this.previousPage=a.previous||null,this.items.forEach(g=>{g.id in this.expandedContents||(this.expandedContents[g.id]=!1)})}catch(a){console.error(a)}finally{this.loading=!1}},truncate(n){return n?n.length>100?n.substring(0,100)+"...":n:""},toggleExpand(n){this.expandedContents[n]=!this.expandedContents[n]},isExpanded(n){return!!this.expandedContents[n]},openAddModal(){this.editMode=!1,this.selectedItem=null,this.showModal=!0},editItem(n){this.editMode=!0,this.selectedItem=n,this.showModal=!0},openDeleteModal(n){this.deleteId=n,this.deleteModalVisible=!0},async confirmDelete(){await this.$apiDelete("/news",this.deleteId)&&this.$root.$refs.toast.showToast("News deleted successfully","success"),this.deleteModalVisible=!1,this.fetchItems(this.currentPage)}},mounted(){this.fetchItems()}},j={class:"p-6 bg-gray-50 min-h-screen text-sm text-gray-800 relative"},E={class:"flex items-center justify-between mb-6 border-b pb-4 border-gray-200"},L={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},A={class:"flex items-center gap-2 text-sm text-gray-600"},B=["value"],Q={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},T={class:"text-xs text-gray-500 mb-2"},F={class:"flex gap-2 mb-3"},U={class:"w-1/2"},G=["src","onClick"],H={class:"w-1/2"},q=["src"],J={class:"flex flex-row space-x-12"},K={class:"text-lg font-semibold text-gray-800 mb-2"},O={class:"mb-3 text-sm text-gray-700"},R={class:"text-gray-600 mb-3"},W=["onClick"],X={class:"flex justify-end space-x-4 text-lg"},Y=["onClick"],Z=["onClick"],$={key:0,class:"col-span-full text-center text-gray-400 italic py-10"},ee={class:"flex items-center justify-between mt-6 text-sm text-gray-600"},te={class:"flex items-center gap-2"},se=["disabled"],oe={class:"px-3 py-1 bg-green-600 text-white rounded-lg font-medium"},ne=["disabled"],le={key:2,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50"},re={class:"relative"},ie=["src"];function de(n,e,a,g,o,l){const w=u("Loading"),y=u("add-news"),_=u("edit-news"),k=u("delete-confirm-modal");return r(),d("div",j,[h(w,{visible:o.loading,message:"Loading News..."},null,8,["visible"]),t("div",E,[e[12]||(e[12]=t("h1",{class:"text-lg font-bold text-gray-800"},"News",-1)),t("button",{onClick:e[0]||(e[0]=(...s)=>l.openAddModal&&l.openAddModal(...s)),class:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium shadow-md flex items-center space-x-1 text-sm"},e[11]||(e[11]=[t("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",null,"Add News",-1)]))]),t("div",L,[f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.searchQuery=s),onInput:e[2]||(e[2]=s=>l.fetchItems(1)),type:"text",placeholder:"Search...",class:"border border-gray-300 rounded-lg px-4 py-2 text-sm w-full sm:max-w-xs focus:outline-none focus:ring-2 focus:ring-green-500 shadow-sm transition duration-150"},null,544),[[z,o.searchQuery]]),t("div",A,[e[13]||(e[13]=t("label",null,"Show",-1)),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.pageSize=s),onChange:e[4]||(e[4]=s=>l.fetchItems(1)),class:"border border-gray-300 rounded-lg px-2 py-1 text-sm bg-white focus:ring-green-500 focus:border-green-500"},[(r(),d(x,null,p([3,6,9,12,15,100],s=>t("option",{key:s,value:s},i(s),9,B)),64))],544),[[V,o.pageSize]]),e[14]||(e[14]=t("span",null,"entries",-1))])]),t("div",Q,[(r(!0),d(x,null,p(o.items,(s,C)=>(r(),d("div",{key:s.id,class:"bg-white p-4 rounded-xl border border-gray-200 shadow hover:shadow-lg transition duration-150"},[t("div",T,"#"+i(C+1),1),t("div",F,[t("div",U,[s.image?(r(),d("img",{key:0,src:s.image,alt:"News Image",class:"w-full h-32 object-cover rounded-lg cursor-zoom-in",onClick:m=>o.zoomImage=s.image},null,8,G)):c("",!0)]),t("div",H,[s.video?(r(),d("video",{key:0,src:s.video,controls:"",class:"w-full h-32 rounded-lg object-cover"},null,8,q)):c("",!0)])]),t("div",J,[t("h2",K,i(s.title),1),t("div",O,[e[15]||(e[15]=t("span",{class:"font-semibold"},"Category:",-1)),v(" "+i(s.category),1)])]),t("p",R,[v(i(l.isExpanded(s.id)?s.content:l.truncate(s.content))+" ",1),s.content&&s.content.length>100?(r(),d("button",{key:0,onClick:m=>l.toggleExpand(s.id),class:"text-green-600 hover:text-green-800 text-xs ml-1"},i(l.isExpanded(s.id)?"Less":"More"),9,W)):c("",!0)]),t("div",X,[t("button",{onClick:m=>l.editItem(s),class:"text-blue-500 hover:text-blue-700"},e[16]||(e[16]=[t("i",{class:"fas fa-edit"},null,-1)]),8,Y),t("button",{onClick:m=>l.openDeleteModal(s.id),class:"text-red-500 hover:text-red-700"},e[17]||(e[17]=[t("i",{class:"fas fa-trash"},null,-1)]),8,Z)])]))),128)),o.items.length===0?(r(),d("div",$," No data found. ")):c("",!0)]),t("div",ee,[t("span",null," Showing "+i((o.currentPage-1)*o.pageSize+1)+" to "+i(Math.min(o.currentPage*o.pageSize,o.count))+" of "+i(o.count)+" total entries ",1),t("div",te,[t("button",{onClick:e[5]||(e[5]=s=>l.fetchItems(o.currentPage-1)),disabled:!o.previousPage,class:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150"},"← Previous",8,se),t("span",oe,i(o.currentPage),1),t("button",{onClick:e[6]||(e[6]=s=>l.fetchItems(o.currentPage+1)),disabled:!o.nextPage,class:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150"},"Next →",8,ne)])]),o.showModal&&!o.editMode?(r(),b(y,{key:0,data:o.selectedItem,onClose:e[7]||(e[7]=s=>o.showModal=!1),onSaved:l.fetchItems},null,8,["data","onSaved"])):c("",!0),o.showModal&&o.editMode?(r(),b(_,{key:1,data:o.selectedItem,onClose:e[8]||(e[8]=s=>o.showModal=!1),onSaved:l.fetchItems},null,8,["data","onSaved"])):c("",!0),h(k,{visible:o.deleteModalVisible,title:"Delete News",message:"Are you sure you want to delete this News?",onConfirm:l.confirmDelete,onCancel:e[9]||(e[9]=s=>o.deleteModalVisible=!1)},null,8,["visible","onConfirm"]),o.zoomImage?(r(),d("div",le,[t("div",re,[t("button",{onClick:e[10]||(e[10]=s=>o.zoomImage=null),class:"absolute top-2 right-2 text-white text-3xl"},"×"),t("img",{src:o.zoomImage,class:"max-w-full max-h-screen rounded-lg shadow-lg"},null,8,ie)])])):c("",!0)])}const he=S(D,[["render",de]]);export{he as default};
