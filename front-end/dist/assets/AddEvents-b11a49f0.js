import{_ as m,o as d,c as a,b as e,i as u,w as l,v as r,d as f,F as p,e as b,t as g}from"./index-4d9ae2c6.js";const y={props:{data:Object},data(){return{form:{title:"",description:"",image:"",video:"",start_date:"",end_date:"",category_id:""},files:{},categories:[]}},methods:{handleFile(i,t){this.files[t]=i.target.files[0]},async fetchCategories(){var i;try{const t=await this.$apiGet("/category",{page:1,page_size:100});this.categories=((i=t.data)==null?void 0:i.data)||t.data||[]}catch(t){console.error("Category load failed",t)}},async submitForm(){try{const i=new FormData;Object.keys(this.form).forEach(t=>{i.append(t,this.form[t])}),Object.keys(this.files).forEach(t=>{i.append(t,this.files[t])}),await this.$apiPost("/event",i,{"Content-Type":"multipart/form-data"}),this.$root.$refs.toast.showToast("Event added successfully","success"),this.$emit("saved"),this.$emit("close")}catch(i){console.error(i)}}},mounted(){this.fetchCategories(),this.data&&Object.keys(this.data).forEach(i=>{this.form[i]!==void 0&&(this.form[i]=this.data[i])})}},v={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},c={class:"bg-white rounded-xl shadow-2xl w-full max-w-3xl p-6 text-sm"},x={class:"flex justify-between items-center mb-4 border-b pb-2"},w={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},k=["value"],C={class:"lg:col-span-2"},E={class:"flex justify-end gap-3 mt-6"};function F(i,t,j,D,o,n){return d(),a("div",v,[e("div",c,[e("div",x,[t[10]||(t[10]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Add Event",-1)),e("button",{onClick:t[0]||(t[0]=s=>i.$emit("close")),class:"text-gray-400 hover:text-gray-600"}," Ã— ")]),e("form",{onSubmit:t[9]||(t[9]=u((...s)=>n.submitForm&&n.submitForm(...s),["prevent"])),enctype:"multipart/form-data"},[e("div",w,[e("div",null,[t[11]||(t[11]=e("label",{class:"block mb-1 font-medium"},"Title",-1)),l(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.form.title=s),type:"text",required:"",class:"input"},null,512),[[r,o.form.title]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block mb-1 font-medium"},"Category",-1)),l(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.form.category_id=s),required:"",class:"input"},[t[12]||(t[12]=e("option",{value:""},"Select Category",-1)),(d(!0),a(p,null,b(o.categories,s=>(d(),a("option",{key:s.id,value:s.id},g(s.name),9,k))),128))],512),[[f,o.form.category_id]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block mb-1 font-medium"},"Start Date",-1)),l(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.start_date=s),type:"date",required:"",class:"input"},null,512),[[r,o.form.start_date]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block mb-1 font-medium"},"End Date",-1)),l(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.form.end_date=s),type:"date",required:"",class:"input"},null,512),[[r,o.form.end_date]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block mb-1 font-medium"},"Image",-1)),e("input",{type:"file",onChange:t[5]||(t[5]=s=>n.handleFile(s,"image")),class:"input"},null,32)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block mb-1 font-medium"},"Video",-1)),e("input",{type:"file",onChange:t[6]||(t[6]=s=>n.handleFile(s,"video")),class:"input"},null,32)]),e("div",C,[t[18]||(t[18]=e("label",{class:"block mb-1 font-medium"},"Description",-1)),l(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.form.description=s),required:"",rows:"3",class:"input"},null,512),[[r,o.form.description]])])]),e("div",E,[e("button",{type:"button",onClick:t[8]||(t[8]=s=>i.$emit("close")),class:"btn-secondary"}," Cancel "),t[19]||(t[19]=e("button",{type:"submit",class:"btn-primary"}," Add Event ",-1))])],32)])])}const h=m(y,[["render",F],["__scopeId","data-v-916fb40f"]]);export{h as default};
