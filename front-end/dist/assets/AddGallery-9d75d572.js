import{_ as u,o as a,c as n,b as s,i as m,w as d,v as f,d as g,F as p,e as b,t as y}from"./index-6099779f.js";const c={props:{data:Object},data(){return{form:{title:"",image:"",category_id:""},files:{},categories:[],loadingCategories:!1}},methods:{handleFile(t,e){this.files[e]=t.target.files[0]},async fetchCategories(){this.loadingCategories=!0;try{const t=await this.$apiGet("/category",{page:1,page_size:100});this.categories=t.data||[]}catch(t){console.error("Error loading categories:",t)}finally{this.loadingCategories=!1}},async submitForm(){try{const t=new FormData;Object.keys(this.form).forEach(o=>{t.append(o,this.form[o])}),Object.keys(this.files).forEach(o=>{t.append(o,this.files[o])});const e={"Content-Type":"multipart/form-data"};await this.$apiPost("/gallery",t,e),this.$root.$refs.toast.showToast("Gallery added successfully","success"),this.$emit("saved"),this.$emit("close")}catch(t){console.error("Submit error:",t)}}},mounted(){this.fetchCategories(),this.data&&Object.keys(this.data).forEach(t=>{this.form[t]!==void 0&&(this.form[t]=this.data[t])})}},x={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},h={class:"bg-white rounded-xl shadow-2xl w-full max-w-sm p-6 text-sm"},v={class:"flex justify-between items-center mb-4 border-b pb-2"},w=["value"],C={class:"flex justify-end gap-3 pt-2"};function k(t,e,o,F,i,l){return a(),n("div",x,[s("div",h,[s("div",v,[e[6]||(e[6]=s("h2",{class:"text-lg font-semibold text-gray-800"},"Add Gallery",-1)),s("button",{onClick:e[0]||(e[0]=r=>t.$emit("close")),class:"text-gray-400 hover:text-gray-600"}," Ã— ")]),s("form",{onSubmit:e[5]||(e[5]=m((...r)=>l.submitForm&&l.submitForm(...r),["prevent"])),class:"space-y-4",enctype:"multipart/form-data"},[s("div",null,[e[7]||(e[7]=s("label",{class:"block mb-1 font-medium text-gray-700"},"Title",-1)),d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>i.form.title=r),type:"text",required:"",class:"border border-gray-300 rounded-lg px-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[f,i.form.title]])]),s("div",null,[e[8]||(e[8]=s("label",{class:"block mb-1 font-medium text-gray-700"},"Image",-1)),s("input",{type:"file",required:"",onChange:e[2]||(e[2]=r=>l.handleFile(r,"image")),class:"border border-gray-300 rounded-lg px-4 py-2 w-full"},null,32)]),s("div",null,[e[10]||(e[10]=s("label",{class:"block mb-1 font-medium text-gray-700"},"Category",-1)),d(s("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>i.form.category_id=r),required:"",class:"border border-gray-300 rounded-lg px-4 py-2 w-full"},[e[9]||(e[9]=s("option",{value:""},"Select Category",-1)),(a(!0),n(p,null,b(i.categories,r=>(a(),n("option",{key:r.id,value:r.id},y(r.name),9,w))),128))],512),[[g,i.form.category_id]])]),s("div",C,[s("button",{type:"button",onClick:e[4]||(e[4]=r=>t.$emit("close")),class:"px-4 py-2 border rounded-lg"}," Cancel "),e[11]||(e[11]=s("button",{type:"submit",class:"px-4 py-2 bg-green-500 text-white rounded-lg"}," Add ",-1))])],32)])])}const $=u(c,[["render",k]]);export{$ as default};
