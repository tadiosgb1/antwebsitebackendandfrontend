import{_ as m,o as n,c as a,b as e,i as u,w as r,v as d,d as f,F as p,e as b,t as g}from"./index-4d9ae2c6.js";const c={props:{data:Object},data(){return{form:{title:"",content:"",image:"",video:"",category_id:""},files:{},categories:[]}},methods:{handleFile(s,t){this.files[t]=s.target.files[0]},async fetchCategories(){var s;try{const t=await this.$apiGet("/category",{page:1,page_size:100});this.categories=((s=t.data)==null?void 0:s.data)||t.data||[]}catch(t){console.error("Failed to load categories",t)}},async submitForm(){try{const s=new FormData;Object.keys(this.form).forEach(t=>{s.append(t,this.form[t])}),Object.keys(this.files).forEach(t=>{s.append(t,this.files[t])}),await this.$apiPost("/news",s,{"Content-Type":"multipart/form-data"}),this.$root.$refs.toast.showToast("News added successfully","success"),this.$emit("saved"),this.$emit("close")}catch(s){console.error(s)}}},mounted(){this.fetchCategories(),this.data&&Object.keys(this.data).forEach(s=>{this.form[s]!==void 0&&(this.form[s]=this.data[s])})}},y={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},v={class:"bg-white rounded-xl shadow-2xl w-full max-w-3xl p-6 text-sm"},w={class:"flex justify-between items-center mb-4 border-b pb-2"},x={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},h=["value"],C={class:"lg:col-span-2"},k={class:"flex justify-end gap-3 mt-6"};function F(s,t,j,N,i,l){return n(),a("div",y,[e("div",v,[e("div",w,[t[8]||(t[8]=e("h2",{class:"text-lg font-semibold text-gray-800"},"Add News",-1)),e("button",{onClick:t[0]||(t[0]=o=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600"}," Ã— ")]),e("form",{onSubmit:t[7]||(t[7]=u((...o)=>l.submitForm&&l.submitForm(...o),["prevent"])),enctype:"multipart/form-data"},[e("div",x,[e("div",null,[t[9]||(t[9]=e("label",{class:"block mb-1 font-medium"},"Title",-1)),r(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.form.title=o),type:"text",required:"",class:"input"},null,512),[[d,i.form.title]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block mb-1 font-medium"},"Category",-1)),r(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>i.form.category_id=o),required:"",class:"input"},[t[10]||(t[10]=e("option",{value:""},"Select Category",-1)),(n(!0),a(p,null,b(i.categories,o=>(n(),a("option",{key:o.id,value:o.id},g(o.name),9,h))),128))],512),[[f,i.form.category_id]])]),e("div",C,[t[12]||(t[12]=e("label",{class:"block mb-1 font-medium"},"Content",-1)),r(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>i.form.content=o),rows:"3",required:"",class:"input"},null,512),[[d,i.form.content]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block mb-1 font-medium"},"Image",-1)),e("input",{type:"file",onChange:t[4]||(t[4]=o=>l.handleFile(o,"image")),class:"input"},null,32)]),e("div",null,[t[14]||(t[14]=e("label",{class:"block mb-1 font-medium"},"Video",-1)),e("input",{type:"file",onChange:t[5]||(t[5]=o=>l.handleFile(o,"video")),class:"input"},null,32)])]),e("div",k,[e("button",{type:"button",onClick:t[6]||(t[6]=o=>s.$emit("close")),class:"btn-secondary"}," Cancel "),t[15]||(t[15]=e("button",{type:"submit",class:"btn-primary"}," Add News ",-1))])],32)])])}const A=m(c,[["render",F],["__scopeId","data-v-04ea2f30"]]);export{A as default};
