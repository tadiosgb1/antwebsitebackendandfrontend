import k from"./AddCategory-2002b431.js";import M from"./EditCategory-c0b535cd.js";import{L as I}from"./Loading-fcacadd9.js";import{D as S}from"./DeleteConfirmModal-8e7a955b.js";import{_ as D,r as u,o as r,c as d,a as x,b as e,w as h,v as P,d as V,F as m,e as y,f as g,t as n,g as b,h as f}from"./index-6099779f.js";const N={components:{AddCategory:k,EditCategory:M,Loading:I,DeleteConfirmModal:S},data(){return{items:[],count:0,nextPage:null,previousPage:null,currentPage:1,pageSize:10,searchQuery:"",showModal:!1,editMode:!1,selectedItem:null,loading:!1,deleteModalVisible:!1,deleteId:null}},methods:{async fetchItems(i=1){this.loading=!0,this.currentPage=i;const t={page:this.currentPage,page_size:this.pageSize,search:this.searchQuery};try{const a=await this.$apiGet("/category",t);this.items=a.data,this.count=a.count||0,this.nextPage=a.next||null,this.previousPage=a.previous||null}catch(a){console.error(a)}finally{this.loading=!1}},openAddModal(){this.editMode=!1,this.selectedItem=null,this.showModal=!0},editItem(i){this.editMode=!0,this.selectedItem=i,this.showModal=!0},viewDetails(i){this.$router.push({name:"Category-detail",params:{id:i}})},openDeleteModal(i){this.deleteId=i,this.deleteModalVisible=!0},async confirmDelete(){await this.$apiDelete("/category",this.deleteId)&&this.$root.$refs.toast.showToast("Category deleted successfully","success"),this.deleteModalVisible=!1,this.fetchItems(this.currentPage)}},mounted(){this.fetchItems()}},A={class:"p-6 bg-gray-50 min-h-screen text-sm text-gray-800 relative"},L={class:"flex items-center justify-between mb-6 border-b pb-4 border-gray-200"},j={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},z={class:"flex items-center gap-2 text-sm text-gray-600"},B=["value"],Q={class:"bg-white overflow-hidden rounded-xl border border-gray-200 hidden md:block"},T={class:"overflow-x-auto"},E={class:"min-w-full text-sm divide-y divide-gray-200"},F={class:"bg-white divide-y divide-gray-200"},U={class:"px-6 py-4"},G={class:"px-6 py-4 whitespace-nowrap"},H={class:"px-6 py-4 whitespace-nowrap"},q={class:"px-6 py-4 whitespace-nowrap"},J={class:"px-6 py-4 text-center space-x-3"},K=["onClick"],O=["onClick"],R=["onClick"],W={key:0},X={class:"md:hidden space-y-4"},Y={class:"flex justify-between mb-3"},Z={class:"font-bold text-gray-800"},$={class:"flex gap-3 text-sm"},ee=["onClick"],te=["onClick"],se=["onClick"],oe={class:"grid grid-cols-2 gap-y-1 text-sm text-gray-700"},le={class:"col-span-2"},ne={class:"col-span-2"},re={class:"col-span-2"},ie={key:0,class:"text-center text-gray-400 py-6 italic"},de={class:"flex items-center justify-between mt-6 text-sm text-gray-600"},ae={class:"flex items-center gap-2"},ce=["disabled"],ue={class:"px-3 py-1 bg-green-600 text-white rounded-lg font-medium"},ge=["disabled"];function pe(i,t,a,me,o,l){const v=u("Loading"),w=u("add-category"),_=u("edit-category"),C=u("delete-confirm-modal");return r(),d("div",A,[x(v,{visible:o.loading,message:"Loading Category..."},null,8,["visible"]),e("div",L,[t[11]||(t[11]=e("h1",{class:"text-lg font-bold text-gray-800"},"Category",-1)),e("button",{onClick:t[0]||(t[0]=(...s)=>l.openAddModal&&l.openAddModal(...s)),class:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium shadow-md flex items-center space-x-1 text-sm"},t[10]||(t[10]=[e("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",null,"Add Category",-1)]))]),e("div",j,[h(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.searchQuery=s),onInput:t[2]||(t[2]=s=>l.fetchItems(1)),type:"text",placeholder:"Search...",class:"border border-gray-300 rounded-lg px-4 py-2 text-sm w-full sm:max-w-xs focus:outline-none focus:ring-2 focus:ring-green-500 shadow-sm transition duration-150"},null,544),[[P,o.searchQuery]]),e("div",z,[t[12]||(t[12]=e("label",null,"Show",-1)),h(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.pageSize=s),onChange:t[4]||(t[4]=s=>l.fetchItems(1)),class:"border border-gray-300 rounded-lg px-2 py-1 text-sm bg-white focus:ring-green-500 focus:border-green-500"},[(r(),d(m,null,y([5,10,20,50,100],s=>e("option",{key:s,value:s},n(s),9,B)),64))],544),[[V,o.pageSize]]),t[13]||(t[13]=e("span",null,"entries",-1))])]),e("div",Q,[e("div",T,[e("table",E,[t[18]||(t[18]=e("thead",{class:"bg-gray-100 text-gray-700 uppercase text-xs font-semibold"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left"},"#"),e("th",{class:"px-6 py-3 text-left"},"Name"),e("th",{class:"px-6 py-3 text-left"},"Description"),e("th",{class:"px-6 py-3 text-left"},"Slug"),e("th",{class:"px-6 py-3 text-center"},"Actions")])],-1)),e("tbody",F,[(r(!0),d(m,null,y(o.items,(s,p)=>(r(),d("tr",{key:s.id,class:"hover:bg-green-50 transition duration-150"},[e("td",U,n(p+1),1),e("td",G,n(s.name),1),e("td",H,n(s.description),1),e("td",q,n(s.slug),1),e("td",J,[e("button",{onClick:c=>l.viewDetails(s.id),class:"text-green-500 hover:text-green-700"},t[14]||(t[14]=[e("i",{class:"fas fa-eye"},null,-1)]),8,K),e("button",{onClick:c=>l.editItem(s),class:"text-blue-500 hover:text-blue-700"},t[15]||(t[15]=[e("i",{class:"fas fa-edit"},null,-1)]),8,O),e("button",{onClick:c=>l.openDeleteModal(s.id),class:"text-red-500 hover:text-red-700"},t[16]||(t[16]=[e("i",{class:"fas fa-trash"},null,-1)]),8,R)])]))),128)),o.items.length===0?(r(),d("tr",W,t[17]||(t[17]=[e("td",{colspan:"5",class:"text-center py-6 text-gray-400 italic"},"No data found.",-1)]))):g("",!0)])])])]),e("div",X,[(r(!0),d(m,null,y(o.items,(s,p)=>(r(),d("div",{key:s.id,class:"bg-white border border-gray-200 rounded-xl shadow p-4"},[e("div",Y,[e("h2",Z,"Category #"+n(p+1),1),e("div",$,[e("button",{onClick:c=>l.viewDetails(s.id),class:"text-green-500 hover:text-green-700"},t[19]||(t[19]=[e("i",{class:"fas fa-eye"},null,-1)]),8,ee),e("button",{onClick:c=>l.editItem(s),class:"text-blue-500 hover:text-blue-700"},t[20]||(t[20]=[e("i",{class:"fas fa-edit"},null,-1)]),8,te),e("button",{onClick:c=>l.openDeleteModal(s.id),class:"text-red-500 hover:text-red-700"},t[21]||(t[21]=[e("i",{class:"fas fa-trash"},null,-1)]),8,se)])]),e("div",oe,[e("div",le,[t[22]||(t[22]=e("span",{class:"font-medium text-gray-600"},"Name:",-1)),f(" "+n(s.name),1)]),e("div",ne,[t[23]||(t[23]=e("span",{class:"font-medium text-gray-600"},"Description:",-1)),f(" "+n(s.description),1)]),e("div",re,[t[24]||(t[24]=e("span",{class:"font-medium text-gray-600"},"Slug:",-1)),f(" "+n(s.slug),1)])])]))),128)),o.items.length===0?(r(),d("p",ie,"No data found.")):g("",!0)]),e("div",de,[e("span",null," Showing "+n((o.currentPage-1)*o.pageSize+1)+" to "+n(Math.min(o.currentPage*o.pageSize,o.count))+" of "+n(o.count)+" total entries ",1),e("div",ae,[e("button",{onClick:t[5]||(t[5]=s=>l.fetchItems(o.currentPage-1)),disabled:!o.previousPage,class:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150"},"← Previous",8,ce),e("span",ue,n(o.currentPage),1),e("button",{onClick:t[6]||(t[6]=s=>l.fetchItems(o.currentPage+1)),disabled:!o.nextPage,class:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150"},"Next →",8,ge)])]),o.showModal&&!o.editMode?(r(),b(w,{key:0,data:o.selectedItem,onClose:t[7]||(t[7]=s=>o.showModal=!1),onSaved:l.fetchItems},null,8,["data","onSaved"])):g("",!0),o.showModal&&o.editMode?(r(),b(_,{key:1,data:o.selectedItem,onClose:t[8]||(t[8]=s=>o.showModal=!1),onSaved:l.fetchItems},null,8,["data","onSaved"])):g("",!0),x(C,{visible:o.deleteModalVisible,title:"Delete Category",message:"Are you sure you want to delete this Category?",onConfirm:l.confirmDelete,onCancel:t[9]||(t[9]=s=>o.deleteModalVisible=!1)},null,8,["visible","onConfirm"])])}const ve=D(N,[["render",pe]]);export{ve as default};
