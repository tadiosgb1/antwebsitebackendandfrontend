import M from"./AddGallery-9d75d572.js";import I from"./EditGallery-540ad228.js";import{L as k}from"./Loading-fcacadd9.js";import{D as C}from"./DeleteConfirmModal-8e7a955b.js";import{_ as P,r as g,o as r,c as a,a as m,b as t,w as f,v as S,d as z,F as h,e as p,f as u,t as i,g as y,h as G}from"./index-6099779f.js";const V={components:{AddGallery:M,EditGallery:I,Loading:k,DeleteConfirmModal:C},data(){return{items:[],count:0,nextPage:null,previousPage:null,currentPage:1,pageSize:3,searchQuery:"",showModal:!1,editMode:!1,selectedItem:null,loading:!1,deleteModalVisible:!1,deleteId:null,zoomImage:null}},methods:{async fetchItems(n=1){this.loading=!0,this.currentPage=n;const e={page:this.currentPage,page_size:this.pageSize,search:this.searchQuery};try{const d=await this.$apiGet("/gallery",e);this.items=d.data||[],this.count=d.count||0,this.nextPage=d.next||null,this.previousPage=d.previous||null}catch(d){console.error(d)}finally{this.loading=!1}},openAddModal(){this.editMode=!1,this.selectedItem=null,this.showModal=!0},editItem(n){this.editMode=!0,this.selectedItem=n,this.showModal=!0},openDeleteModal(n){this.deleteId=n,this.deleteModalVisible=!0},async confirmDelete(){await this.$apiDelete("/gallery",this.deleteId)&&this.$root.$refs.toast.showToast("Gallery deleted successfully","success"),this.deleteModalVisible=!1,this.fetchItems(this.currentPage)},viewDetails(n){this.$router.push({name:"Gallery-detail",params:{id:n}})}},mounted(){this.fetchItems()}},D={class:"p-6 bg-gray-50 min-h-screen text-sm text-gray-800 relative"},j={class:"flex items-center justify-between mb-6 border-b pb-4 border-gray-200"},A={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},L={class:"flex items-center gap-2 text-sm text-gray-600"},N=["value"],B={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Q={class:"text-xs text-gray-500 mb-2"},T={class:"text-lg font-semibold text-gray-800 mb-2"},E={class:"mb-3"},F=["src","onClick"],U={class:"mb-3 text-sm text-gray-700"},H={class:"flex justify-end space-x-4 text-lg"},q=["onClick"],J=["onClick"],K={key:0,class:"col-span-full text-center text-gray-400 italic py-10"},O={class:"flex items-center justify-between mt-6 text-sm text-gray-600"},R={class:"flex items-center gap-2"},W=["disabled"],X={class:"px-3 py-1 bg-green-600 text-white rounded-lg font-medium"},Y=["disabled"],Z={key:2,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50"},$={class:"relative"},ee=["src"];function te(n,e,d,se,s,l){const b=g("Loading"),x=g("add-gallery"),v=g("edit-gallery"),w=g("delete-confirm-modal");return r(),a("div",D,[m(b,{visible:s.loading,message:"Loading Gallery..."},null,8,["visible"]),t("div",j,[e[12]||(e[12]=t("h1",{class:"text-lg font-bold text-gray-800"},"Gallery",-1)),t("button",{onClick:e[0]||(e[0]=(...o)=>l.openAddModal&&l.openAddModal(...o)),class:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium shadow-md flex items-center space-x-1 text-sm"},e[11]||(e[11]=[t("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",null,"Add Gallery",-1)]))]),t("div",A,[f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.searchQuery=o),onInput:e[2]||(e[2]=o=>l.fetchItems(1)),type:"text",placeholder:"Search...",class:"border border-gray-300 rounded-lg px-4 py-2 text-sm w-full sm:max-w-xs focus:outline-none focus:ring-2 focus:ring-green-500 shadow-sm transition duration-150"},null,544),[[S,s.searchQuery]]),t("div",L,[e[13]||(e[13]=t("label",null,"Show",-1)),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.pageSize=o),onChange:e[4]||(e[4]=o=>l.fetchItems(1)),class:"border border-gray-300 rounded-lg px-2 py-1 text-sm bg-white focus:ring-green-500 focus:border-green-500"},[(r(),a(h,null,p([3,6,9,12,15,100],o=>t("option",{key:o,value:o},i(o),9,N)),64))],544),[[z,s.pageSize]]),e[14]||(e[14]=t("span",null,"entries",-1))])]),t("div",B,[(r(!0),a(h,null,p(s.items,(o,_)=>(r(),a("div",{key:o.id,class:"bg-white p-4 rounded-xl border border-gray-200 shadow hover:shadow-lg transition duration-150"},[t("div",Q,"#"+i(_+1),1),t("h2",T,i(o.title),1),t("div",E,[o.image?(r(),a("img",{key:0,src:o.image,alt:"Gallery Image",class:"w-full h-40 object-cover rounded-lg cursor-zoom-in",onClick:c=>s.zoomImage=o.image},null,8,F)):u("",!0)]),t("div",U,[e[15]||(e[15]=t("span",{class:"font-semibold"},"Category:",-1)),G(" "+i(o.Category.name),1)]),t("div",H,[t("button",{onClick:c=>l.editItem(o),class:"text-blue-500 hover:text-blue-700"},e[16]||(e[16]=[t("i",{class:"fas fa-edit"},null,-1)]),8,q),t("button",{onClick:c=>l.openDeleteModal(o.id),class:"text-red-500 hover:text-red-700"},e[17]||(e[17]=[t("i",{class:"fas fa-trash"},null,-1)]),8,J)])]))),128)),s.items.length===0?(r(),a("div",K," No data found. ")):u("",!0)]),t("div",O,[t("span",null," Showing "+i((s.currentPage-1)*s.pageSize+1)+" to "+i(Math.min(s.currentPage*s.pageSize,s.count))+" of "+i(s.count)+" total entries ",1),t("div",R,[t("button",{onClick:e[5]||(e[5]=o=>l.fetchItems(s.currentPage-1)),disabled:!s.previousPage,class:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150"},"← Previous",8,W),t("span",X,i(s.currentPage),1),t("button",{onClick:e[6]||(e[6]=o=>l.fetchItems(s.currentPage+1)),disabled:!s.nextPage,class:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150"},"Next →",8,Y)])]),s.showModal&&!s.editMode?(r(),y(x,{key:0,data:s.selectedItem,onClose:e[7]||(e[7]=o=>s.showModal=!1),onSaved:l.fetchItems},null,8,["data","onSaved"])):u("",!0),s.showModal&&s.editMode?(r(),y(v,{key:1,data:s.selectedItem,onClose:e[8]||(e[8]=o=>s.showModal=!1),onSaved:l.fetchItems},null,8,["data","onSaved"])):u("",!0),m(w,{visible:s.deleteModalVisible,title:"Delete Gallery",message:"Are you sure you want to delete this Gallery?",onConfirm:l.confirmDelete,onCancel:e[9]||(e[9]=o=>s.deleteModalVisible=!1)},null,8,["visible","onConfirm"]),s.zoomImage?(r(),a("div",Z,[t("div",$,[t("button",{onClick:e[10]||(e[10]=o=>s.zoomImage=null),class:"absolute top-2 right-2 text-white text-3xl"},"×"),t("img",{src:s.zoomImage,class:"max-w-full max-h-screen rounded-lg shadow-lg"},null,8,ee)])])):u("",!0)])}const de=P(V,[["render",te]]);export{de as default};
