import I from"./AddService-fe5752ec.js";import k from"./EditService-a5b87b17.js";import{L as S}from"./Loading-ba997810.js";import{D as C}from"./DeleteConfirmModal-b44bd4e2.js";import{_ as P,r as c,o as i,c as a,a as m,b as t,w as f,v as D,d as V,F as p,e as h,f as u,t as d,g as v,h as x}from"./index-4d9ae2c6.js";const j={components:{AddService:I,EditService:k,Loading:S,DeleteConfirmModal:C},data(){return{items:[],count:0,nextPage:null,previousPage:null,currentPage:1,pageSize:6,searchQuery:"",showModal:!1,editMode:!1,selectedItem:null,loading:!1,deleteModalVisible:!1,deleteId:null,expandedIds:[]}},methods:{async fetchItems(l=1){this.loading=!0,this.currentPage=l;const e={page:this.currentPage,page_size:this.pageSize,search:this.searchQuery};try{const r=await this.$apiGet("/service",e);this.items=r.data,this.count=r.count||0,this.nextPage=r.next||null,this.previousPage=r.previous||null}catch(r){console.error(r)}finally{this.loading=!1}},openAddModal(){this.editMode=!1,this.selectedItem=null,this.showModal=!0},editItem(l){this.editMode=!0,this.selectedItem=l,this.showModal=!0},viewDetails(l){this.$router.push({name:"Service-detail",params:{id:l}})},openDeleteModal(l){this.deleteId=l,this.deleteModalVisible=!0},async confirmDelete(){await this.$apiDelete("/service",this.deleteId)&&this.$root.$refs.toast.showToast("Service deleted successfully","success"),this.deleteModalVisible=!1,this.fetchItems(this.currentPage)},wordCount(l){return l?l.trim().split(/\s+/).length:0},truncateText(l,e){if(!l)return"";const r=l.trim().split(/\s+/);return r.length<=e?l:r.slice(0,e).join(" ")+"..."},toggleReadMore(l){this.expandedIds.includes(l)?this.expandedIds=this.expandedIds.filter(e=>e!==l):this.expandedIds.push(l)},isExpanded(l){return this.expandedIds.includes(l)}},mounted(){this.fetchItems()}},A={class:"p-6 bg-gray-50 min-h-screen text-sm text-gray-800 relative"},N={class:"flex items-center justify-between mb-6 border-b pb-4 border-gray-200"},T={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4"},z={class:"flex items-center gap-2 text-sm text-gray-600"},B=["value"],E={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"},L={class:"flex gap-4"},Q={class:"flex-shrink-0"},R=["src"],F={class:"flex-1 flex flex-col justify-start gap-1 text-gray-700 text-sm"},U={class:"font-medium text-gray-600"},G={class:"mt-2 text-gray-700"},H=["onClick"],q={class:"flex justify-end gap-2 mt-4"},J=["onClick"],K=["onClick"],O=["onClick"],W={key:0,class:"col-span-full text-center text-gray-400 italic py-10"},X={class:"flex items-center justify-between mt-6 text-sm text-gray-600"},Y={class:"flex items-center gap-2"},Z=["disabled"],$={class:"px-3 py-1 bg-green-600 text-white rounded-lg font-medium"},ee=["disabled"];function te(l,e,r,se,o,n){const b=c("Loading"),y=c("add-service"),w=c("edit-service"),M=c("delete-confirm-modal");return i(),a("div",A,[m(b,{visible:o.loading,message:"Loading Service..."},null,8,["visible"]),t("div",N,[e[11]||(e[11]=t("h1",{class:"text-lg font-bold text-gray-800"},"Service",-1)),t("button",{onClick:e[0]||(e[0]=(...s)=>n.openAddModal&&n.openAddModal(...s)),class:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium shadow-md flex items-center space-x-1 text-sm"},e[10]||(e[10]=[t("svg",{class:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",null,"Add Service",-1)]))]),t("div",T,[f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.searchQuery=s),onInput:e[2]||(e[2]=s=>n.fetchItems(1)),type:"text",placeholder:"Search...",class:"border border-gray-300 rounded-lg px-4 py-2 text-sm w-full sm:max-w-xs focus:outline-none focus:ring-2 focus:ring-green-500 shadow-sm transition duration-150"},null,544),[[D,o.searchQuery]]),t("div",z,[e[12]||(e[12]=t("label",null,"Show",-1)),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.pageSize=s),onChange:e[4]||(e[4]=s=>n.fetchItems(1)),class:"border border-gray-300 rounded-lg px-2 py-1 text-sm bg-white focus:ring-green-500 focus:border-green-500"},[(i(),a(p,null,h([6,9,12,50,100],s=>t("option",{key:s,value:s},d(s),9,B)),64))],544),[[V,o.pageSize]]),e[13]||(e[13]=t("span",null,"entries",-1))])]),t("div",E,[(i(!0),a(p,null,h(o.items,(s,_)=>(i(),a("div",{key:s.id,class:"bg-white border border-gray-200 rounded-xl shadow p-4 flex flex-col justify-between"},[t("div",L,[t("div",Q,[s.icon?(i(),a("img",{key:0,src:s.icon,alt:"Icon",class:"w-20 h-20 object-contain rounded-lg"},null,8,R)):u("",!0)]),t("div",F,[t("div",null,[t("span",U,"#"+d(_+1),1),e[14]||(e[14]=x(" - ",-1)),e[15]||(e[15]=t("span",{class:"font-medium text-gray-600"},"Title:",-1)),x(" "+d(s.title),1)]),t("div",G,[e[16]||(e[16]=t("span",{class:"font-medium text-gray-600"},"Description:",-1)),t("span",null,d(n.isExpanded(s.id)?s.description:n.truncateText(s.description,100)),1),n.wordCount(s.description)>100?(i(),a("button",{key:0,onClick:g=>n.toggleReadMore(s.id),class:"text-blue-500 ml-1"},d(n.isExpanded(s.id)?"Read less":"Read more"),9,H)):u("",!0)])])]),t("div",q,[t("button",{onClick:g=>n.viewDetails(s.id),class:"text-green-500 hover:text-green-700"},e[17]||(e[17]=[t("i",{class:"fas fa-eye"},null,-1)]),8,J),t("button",{onClick:g=>n.editItem(s),class:"text-blue-500 hover:text-blue-700"},e[18]||(e[18]=[t("i",{class:"fas fa-edit"},null,-1)]),8,K),t("button",{onClick:g=>n.openDeleteModal(s.id),class:"text-red-500 hover:text-red-700"},e[19]||(e[19]=[t("i",{class:"fas fa-trash"},null,-1)]),8,O)])]))),128)),o.items.length===0?(i(),a("div",W," No data found. ")):u("",!0)]),t("div",X,[t("span",null," Showing "+d((o.currentPage-1)*o.pageSize+1)+" to "+d(Math.min(o.currentPage*o.pageSize,o.count))+" of "+d(o.count)+" total entries ",1),t("div",Y,[t("button",{onClick:e[5]||(e[5]=s=>n.fetchItems(o.currentPage-1)),disabled:!o.previousPage,class:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150"},"← Previous",8,Z),t("span",$,d(o.currentPage),1),t("button",{onClick:e[6]||(e[6]=s=>n.fetchItems(o.currentPage+1)),disabled:!o.nextPage,class:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition duration-150"},"Next →",8,ee)])]),o.showModal&&!o.editMode?(i(),v(y,{key:0,data:o.selectedItem,onClose:e[7]||(e[7]=s=>o.showModal=!1),onSaved:n.fetchItems},null,8,["data","onSaved"])):u("",!0),o.showModal&&o.editMode?(i(),v(w,{key:1,data:o.selectedItem,onClose:e[8]||(e[8]=s=>o.showModal=!1),onSaved:n.fetchItems},null,8,["data","onSaved"])):u("",!0),m(M,{visible:o.deleteModalVisible,title:"Delete Service",message:"Are you sure you want to delete this Service?",onConfirm:n.confirmDelete,onCancel:e[9]||(e[9]=s=>o.deleteModalVisible=!1)},null,8,["visible","onConfirm"])])}const de=P(j,[["render",te]]);export{de as default};
